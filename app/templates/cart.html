{% extends "base.html" %}

{% block content %}


<br><br>


<br><br>
{% if current_user.is_authenticated %}
<!-- TO FIX: PURCHASES CURRENTLY BROKEN DUE TO NAMING CONVENTIONS -->
<h2>Your Cart:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Quantity</th>
      <th scope="col">Unit Price</th>
      <th scope="col">Total Price</th>
      <th scope="col">Options</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
      <tr>
        <th scope="row">{{item.pid}}</th>
        <th scope="row">{{item.name}}</th>
        <th scope="row">{{item.p_quantity}}</th>
        <th scope="row">{{item.unit_price}}</th>
        <th scope="row">{{item.unit_price * item.p_quantity}}</th>
        <th scope="row">
          
          <form action="{{url_for('users.remove_item', pid = item.pid, uid = current_user.uid)}}" method="POST">   <!-- fix this shiz-->
            <input type="submit" value="Remove from Cart"> 
          </form>
          
          <form action="{{url_for('users.login')}}" method="POST">   <!-- fix this shiz-->
          <input type="submit" value="Save for Later"> 

          <form action="{{url_for('users.Add', pid = item.pid, uid = current_user.uid)}}" method="POST">   <!-- fix this shiz-->
            <button type="submit">+</button>
            
            <form action="{{url_for('users.login')}}" method="POST">   <!-- fix this shiz-->
              <input type="submit" value="-"> 
        </form>
        </th>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

<h3>Cart Total: {{total}}</h3> 
<form action="{{url_for('users.login')}}" method="POST"> <!-- change to proper page -->
  <input type="submit" value="Checkout">
</form>

{% endblock %}
